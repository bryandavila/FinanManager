@model FinanManager.Models.User

@{
	ViewData["Title"] = "Editar Perfil";
}

<div class="container">
	<h2>Editar Perfil</h2>

	<!-- Importación de SweetAlert2 -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	<script>
		document.addEventListener("DOMContentLoaded", function() {
		@if (TempData["SuccessMessage"] != null)
		{
			<text>
						Swal.fire({
							icon: 'success',
							title: '¡Éxito!',
							text: '@Html.Raw(TempData["SuccessMessage"])',
							confirmButtonColor: '#3085d6',
							confirmButtonText: 'Aceptar',
							showCancelButton: false // Asegúrate de que sea "false" en minúsculas
						});
				@{
					TempData.Remove("SuccessMessage");
				} // Eliminar después de mostrar
			</text>
		}

		@if (TempData["ErrorMessage"] != null)
		{
			<text>
						Swal.fire({
							icon: 'error',
							title: '¡Error!',
							text: '@Html.Raw(TempData["ErrorMessage"])',
							confirmButtonColor: '#d33',
							confirmButtonText: 'Aceptar',
							showCancelButton: false // Asegúrate de que sea "false" en minúsculas
						});
				@{
					TempData.Remove("ErrorMessage");
				} // Eliminar después de mostrar
			</text>
		}
		});
	</script>

	<!-- Formulario para actualizar el nombre -->
	<form asp-action="EditarNombre" method="post" class="mt-3">
		<input type="hidden" name="userId" value="@Model.Users_Id" />
		<div class="mb-3">
			<label for="name" class="form-label">Nombre</label>
			<input type="text" id="name" name="name" class="form-control" value="@Model.Name" required />
		</div>
		<button type="submit" class="btn btn-primary">Cambiar nombre</button>
	</form>

	<!-- Formulario para actualizar el apellido -->
	<form asp-action="EditarApellido" method="post" class="mt-3">
		<input type="hidden" name="userId" value="@Model.Users_Id" />
		<div class="mb-3">
			<label for="lastName" class="form-label">Apellido</label>
			<input type="text" id="lastName" name="lastName" class="form-control" value="@Model.LastName" required />
		</div>
		<button type="submit" class="btn btn-primary">Cambiar apellido</button>
	</form>

	<!-- Formulario para actualizar el correo electrónico -->
	<form asp-action="EditarCorreo" method="post" class="mt-3">
		<input type="hidden" name="userId" value="@Model.Users_Id" />
		<div class="mb-3">
			<label for="userEmail" class="form-label">Correo Electrónico</label>
			<input type="email" id="userEmail" name="userEmail" class="form-control" value="@Model.UserEmail" required />
		</div>
		<button type="submit" class="btn btn-primary">Cambiar correo</button>
	</form>

	<!-- Formulario para actualizar la contraseña -->
	<form asp-action="EditarContraseña" method="post" class="mt-3">
		<input type="hidden" name="userId" value="@Model.Users_Id" />
		<div class="mb-3">
			<label for="currentPassword" class="form-label">Contraseña Actual</label>
			<input type="password" id="currentPassword" name="currentPassword" class="form-control" required />
		</div>
		<div class="mb-3">
			<label for="newPassword" class="form-label">Nueva Contraseña</label>
			<input type="password" id="newPassword" name="newPassword" class="form-control" required />
		</div>
		<div class="mb-3">
			<label for="confirmPassword" class="form-label">Confirmar Nueva Contraseña</label>
			<input type="password" id="confirmPassword" name="confirmPassword" class="form-control" required />
		</div>
		<button type="submit" class="btn btn-primary">Actualizar contraseña</button>
	</form>
</div>
