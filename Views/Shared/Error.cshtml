@using System.Dynamic
@model List<dynamic>?

@{
    var tableType = ViewBag.TableType as string ?? "Bienes"; // Valor por defecto
    ViewBag.Title = tableType switch
    {
        "Bienes" => "Bienes Aprobados",
        "Gasto" => "Gastos Aprobados",
        "Proyectos" => "Proyectos Aprobados",
        _ => "Registros Aprobados"
    };
}

<h2 class="text-center mb-4">@ViewBag.Title</h2>

<!-- Mensaje cuando no hay datos o modelo es nulo -->
@if (Model == null || !Model.Any())
{
    <div class="alert alert-warning">
        @(ViewBag.NoDataMessage ?? "No se encontraron registros aprobados")
    </div>

    <!-- Bot칩n de regresar (versi칩n para modelo nulo) -->
    <div class="mt-3">
        <a href="javascript:history.back()" class="btn btn-outline-primary rounded-pill">
            <i class="fas fa-arrow-circle-left me-2"></i> Regresar
        </a>
    </div>

    @section Scripts {
    <script>
        toastr.warning('@(ViewBag.NoDataMessage ?? "No se encontraron datos")');
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    }

    return; // Detiene el procesamiento del resto de la vista
}

<!-- Tabla din치mica -->
<div class="table-responsive position-relative">
    <table class="table table-striped table-bordered table-hover">
        <!-- ... (el mismo contenido de tabla que antes) ... -->
    </table>

    <!-- Bot칩n de regresar con icono -->
    <div class="position-absolute start-0 bottom-0 translate-middle-y mb-3 ms-3">
        <a href="javascript:history.back()" class="btn btn-outline-primary rounded-pill">
            <i class="fas fa-arrow-circle-left me-2"></i> Regresar
        </a>
    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    @if (ViewBag.NoDataMessage != null)
    {
        <script>
            toastr.warning('@ViewBag.NoDataMessage');
        </script>
    }

    <style>
        .btn-outline-primary {
            transition: all 0.3s ease;
            border-width: 2px;
        }

            .btn-outline-primary:hover {
                background-color: #0d6efd;
                color: white;
                transform: translateX(-3px);
            }

        .fa-arrow-circle-left {
            transition: transform 0.3s ease;
        }

        .btn-outline-primary:hover .fa-arrow-circle-left {
            transform: translateX(-3px);
        }
    </style>
}
